<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Hamiltonian Diagonalization: utilities::MultiHashBase&lt; T &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Hamiltonian Diagonalization
   &#160;<span id="projectnumber">Version 1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classutilities_1_1MultiHashBase.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classutilities_1_1MultiHashBase-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">utilities::MultiHashBase&lt; T &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A class template to contain implementations of utility functions used in either the <a class="el" href="classutilities_1_1MultiHashMap.html">MultiHashMap</a> or <a class="el" href="classutilities_1_1MultiHashMultiMap.html">MultiHashMultiMap</a> classes below.  
 <a href="classutilities_1_1MultiHashBase.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="multi__key__hash_8hpp_source.html">multi_key_hash.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for utilities::MultiHashBase&lt; T &gt;:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classutilities_1_1MultiHashBase.png" usemap="#utilities::MultiHashBase&lt; T &gt;_map" alt=""/>
  <map id="utilities::MultiHashBase&lt; T &gt;_map" name="utilities::MultiHashBase&lt; T &gt;_map">
<area href="classutilities_1_1MultiHashMap.html" alt="utilities::MultiHashMap&lt; T &gt;" shape="rect" coords="0,56,195,80"/>
<area href="classutilities_1_1MultiHashMultiMap.html" alt="utilities::MultiHashMultiMap&lt; T &gt;" shape="rect" coords="205,56,400,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a04c91198eff1a1b6b663f10a827aca90"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutilities_1_1MultiHashBase.html#a04c91198eff1a1b6b663f10a827aca90">MultiHashBase</a> ()</td></tr>
<tr class="separator:a04c91198eff1a1b6b663f10a827aca90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac67b9fda8800862bb85ecd03a6e162e3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classutilities_1_1MultiHashBase.html#ac67b9fda8800862bb85ecd03a6e162e3">~MultiHashBase</a> ()</td></tr>
<tr class="separator:ac67b9fda8800862bb85ecd03a6e162e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a2b68781bf0db191bd4e9a0fc2c9e51cb"><td class="memTemplParams" colspan="2">template&lt;class M &gt; </td></tr>
<tr class="memitem:a2b68781bf0db191bd4e9a0fc2c9e51cb"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classutilities_1_1MultiHashBase.html#a2b68781bf0db191bd4e9a0fc2c9e51cb">MpiSynchronizeBase</a> (M &amp;map, const int nodeId, const <a class="el" href="structutilities_1_1MpiWrapper.html">MpiWrapper</a> &amp;<a class="el" href="fqhe__sphere__spinless__fermions__diagonalization_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>)</td></tr>
<tr class="memdesc:a2b68781bf0db191bd4e9a0fc2c9e51cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mpi synchronize the contents of the map. This template function takes any map type as an argument, but every map type has available all the methods called for this operation.  <a href="#a2b68781bf0db191bd4e9a0fc2c9e51cb">More...</a><br/></td></tr>
<tr class="separator:a2b68781bf0db191bd4e9a0fc2c9e51cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0959d1e75fcd544c43b3df25af8e7d27"><td class="memTemplParams" colspan="2">template&lt;class M &gt; </td></tr>
<tr class="memitem:a0959d1e75fcd544c43b3df25af8e7d27"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classutilities_1_1MultiHashBase.html#a0959d1e75fcd544c43b3df25af8e7d27">MpiGatherBase</a> (M &amp;map, const int nodeId, const <a class="el" href="structutilities_1_1MpiWrapper.html">MpiWrapper</a> &amp;<a class="el" href="fqhe__sphere__spinless__fermions__diagonalization_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>)</td></tr>
<tr class="memdesc:a0959d1e75fcd544c43b3df25af8e7d27"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mpi gather the contents of the map onto the master node. This template function takes any map type as an argument, but every map type has available all the methods called for this operation.  <a href="#a0959d1e75fcd544c43b3df25af8e7d27">More...</a><br/></td></tr>
<tr class="separator:a0959d1e75fcd544c43b3df25af8e7d27"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebbf5753a0c716133002286c28cfb5ca"><td class="memTemplParams" colspan="2">template&lt;class M &gt; </td></tr>
<tr class="memitem:aebbf5753a0c716133002286c28cfb5ca"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classutilities_1_1MultiHashBase.html#aebbf5753a0c716133002286c28cfb5ca">MpiScatterBase</a> (M &amp;map, const uint64_t maxKey, const int nodeId, <a class="el" href="structutilities_1_1MpiWrapper.html">MpiWrapper</a> &amp;<a class="el" href="fqhe__sphere__spinless__fermions__diagonalization_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>)</td></tr>
<tr class="memdesc:aebbf5753a0c716133002286c28cfb5ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mpi scatter the contents of the map from the master node to distribute over a number of nodes according to the range of the map key.  <a href="#aebbf5753a0c716133002286c28cfb5ca">More...</a><br/></td></tr>
<tr class="separator:aebbf5753a0c716133002286c28cfb5ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a636d41d0dec084650bd84a50363260f2"><td class="memTemplParams" colspan="2">template&lt;class M &gt; </td></tr>
<tr class="memitem:a636d41d0dec084650bd84a50363260f2"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classutilities_1_1MultiHashBase.html#a636d41d0dec084650bd84a50363260f2">ToFileBase</a> (const M &amp;map, std::ofstream &amp;stream, const <a class="el" href="namespaceio.html#a21deb8bdc22417a8eb07113769d6c601">io::fileFormat_t</a> format, const unsigned int nbrLabels, <a class="el" href="structutilities_1_1MpiWrapper.html">MpiWrapper</a> &amp;<a class="el" href="fqhe__sphere__spinless__fermions__diagonalization_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>)</td></tr>
<tr class="separator:a636d41d0dec084650bd84a50363260f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a535ca97739582012050ca75e05c30106"><td class="memTemplParams" colspan="2">template&lt;class M &gt; </td></tr>
<tr class="memitem:a535ca97739582012050ca75e05c30106"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classutilities_1_1MultiHashBase.html#a535ca97739582012050ca75e05c30106">FromFileBase</a> (M &amp;map, std::ifstream &amp;stream, const <a class="el" href="namespaceio.html#a21deb8bdc22417a8eb07113769d6c601">io::fileFormat_t</a> format, <a class="el" href="structutilities_1_1MpiWrapper.html">MpiWrapper</a> &amp;<a class="el" href="fqhe__sphere__spinless__fermions__diagonalization_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>)</td></tr>
<tr class="separator:a535ca97739582012050ca75e05c30106"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;typename T&gt;<br/>
class utilities::MultiHashBase&lt; T &gt;</h3>

<p>A class template to contain implementations of utility functions used in either the <a class="el" href="classutilities_1_1MultiHashMap.html">MultiHashMap</a> or <a class="el" href="classutilities_1_1MultiHashMultiMap.html">MultiHashMultiMap</a> classes below. </p>
<p>The basic multi hash map is built by a binary concatenation of multiple keys, which are then treated as a single value for an underlying hash table implementation.</p>
<p>The template parameter T defines the type of data to be stored in the hash map </p>

<p>Definition at line <a class="el" href="multi__key__hash_8hpp_source.html#l00140">140</a> of file <a class="el" href="multi__key__hash_8hpp_source.html">multi_key_hash.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a04c91198eff1a1b6b663f10a827aca90"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classutilities_1_1MultiHashBase.html">utilities::MultiHashBase</a>&lt; T &gt;::<a class="el" href="classutilities_1_1MultiHashBase.html">MultiHashBase</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classutilities_1_1MultiHashBase.html" title="A class template to contain implementations of utility functions used in either the MultiHashMap or M...">MultiHashBase</a> constructor </p>

<p>Definition at line <a class="el" href="multi__key__hash_8hpp_source.html#l00675">675</a> of file <a class="el" href="multi__key__hash_8hpp_source.html">multi_key_hash.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;{};</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac67b9fda8800862bb85ecd03a6e162e3"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classutilities_1_1MultiHashBase.html">utilities::MultiHashBase</a>&lt; T &gt;::~<a class="el" href="classutilities_1_1MultiHashBase.html">MultiHashBase</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p><a class="el" href="classutilities_1_1MultiHashBase.html" title="A class template to contain implementations of utility functions used in either the MultiHashMap or M...">MultiHashBase</a> destructor </p>

<p>Definition at line <a class="el" href="multi__key__hash_8hpp_source.html#l00680">680</a> of file <a class="el" href="multi__key__hash_8hpp_source.html">multi_key_hash.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;{};</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a535ca97739582012050ca75e05c30106"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<div class="memtemplate">
template&lt;class M &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classutilities_1_1MultiHashBase.html">utilities::MultiHashBase</a>&lt; T &gt;::FromFileBase </td>
          <td>(</td>
          <td class="paramtype">M &amp;&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ifstream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespaceio.html#a21deb8bdc22417a8eb07113769d6c601">io::fileFormat_t</a>&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structutilities_1_1MpiWrapper.html">MpiWrapper</a> &amp;&#160;</td>
          <td class="paramname"><em>mpi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Write the contents of the map to a file using the set number of key labels </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>Map containing data to write to the file </td></tr>
    <tr><td class="paramname">stream</td><td>File stream </td></tr>
    <tr><td class="paramname">format</td><td>Format of file </td></tr>
    <tr><td class="paramname">mpi</td><td>Instance of the MPI wrapper class </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="multi__key__hash_8hpp_source.html#l00571">571</a> of file <a class="el" href="multi__key__hash_8hpp_source.html">multi_key_hash.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;        {</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;            <span class="keywordflow">if</span>(0 == <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">m_id</a>)    <span class="comment">//  FOR THE MASTER NODE</span></div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;            {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                <span class="keywordflow">if</span>(!<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a7ffe7ed2049a6b7feb5778886a0d522e">m_exitFlag</a>)</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                {</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                    std::vector&lt;std::pair&lt;uint64_t, T&gt; &gt; pairList;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="namespaceio.html#a21deb8bdc22417a8eb07113769d6c601af3e653b8bd8f794975fa5bda0a927bfc">io::_BINARY_</a> == format)</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                    {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size = 0;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                        stream.read(reinterpret_cast&lt;char*&gt;(&amp;size), <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                        pairList.resize(size);</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                        std::vector&lt;uint64_t&gt; keys(size);</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                        std::vector&lt;T&gt; values(size);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                        stream.read(reinterpret_cast&lt;char*&gt;(keys.data()), size*<span class="keyword">sizeof</span>(uint64_t));</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                        stream.read(reinterpret_cast&lt;char*&gt;(values.data()), size*<span class="keyword">sizeof</span>(T));</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                        std::vector&lt;uint64_t&gt;::iterator keys_it = keys.begin();</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                        <span class="keyword">typename</span> std::vector&lt;T&gt;::iterator values_it = values.begin();</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                        <span class="keywordflow">for</span>(<span class="keyword">auto</span> it = pairList.begin(); it &lt; pairList.end(); ++it, ++keys_it, ++values_it)</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                        {</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                            it-&gt;first = *keys_it;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                            it-&gt;second = *values_it;</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                        }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                    }</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="namespaceio.html#a21deb8bdc22417a8eb07113769d6c601ac78d869c7c1c4a0f9c801afc7cca4ce8">io::_TEXT_</a> == format)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                    {</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size;</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                        stream &gt;&gt; size;</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                        uint64_t nbrLabels; </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                        stream &gt;&gt; nbrLabels;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                        pairList.reserve(size);</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                        <span class="keywordflow">for</span>(uint64_t i=0; i&lt;size; ++i)</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                        {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                            uint64_t key;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                            <span class="keywordflow">switch</span>(nbrLabels)</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                            {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                                <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                                {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                                    stream &gt;&gt; key;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                                }</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                                <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                                {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                                    uint32_t key1, key2;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                                    stream &gt;&gt; key1;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                                    stream &gt;&gt; key2;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                                    key = <a class="code" href="namespaceutilities.html#aa88f2e607b1e3541233edf2bd7ee44ab">utilities::Pack2x32</a>(key1, key2);</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                                }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                                <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                                {</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                                    uint16_t key1, key2, key3;</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                                    stream &gt;&gt; key1;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                                    stream &gt;&gt; key2;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                                    stream &gt;&gt; key3;</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                                    key = <a class="code" href="namespaceutilities.html#ab78b0dbfe83aa9c7055214013b2d2b40">utilities::Pack4x16</a>(key1, key2, key3, 0);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                                }</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;                                <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                                {</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                                    uint16_t key1, key2, key3, key4;</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                                    stream &gt;&gt; key1;</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                                    stream &gt;&gt; key2;</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                                    stream &gt;&gt; key3;</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                                    stream &gt;&gt; key4;</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                                    key = <a class="code" href="namespaceutilities.html#ab78b0dbfe83aa9c7055214013b2d2b40">utilities::Pack4x16</a>(key1, key2, key3, key4);</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                                }</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                                <span class="keywordflow">case</span> 8:</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                                {</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;                                    uint8_t key1, key2, key3, key4, key5, key6, key7, key8;</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;                                    stream &gt;&gt; key1;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;                                    stream &gt;&gt; key2;</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;                                    stream &gt;&gt; key3;</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;                                    stream &gt;&gt; key4;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                                    stream &gt;&gt; key5;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                                    stream &gt;&gt; key6;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                                    stream &gt;&gt; key7;</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                                    stream &gt;&gt; key8;</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;                                    key = <a class="code" href="namespaceutilities.html#abf0d157baa23b47b75d49bf4bb08ff3f">utilities::Pack8x8</a>(key1, key2, key3, key4, key5, key6, key7, key8);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                                }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                            }</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                            T val;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                            <a class="code" href="namespaceutilities.html#a2a6afaf89e9c2b614a690c5bae5ea984">utilities::FromStream</a>(stream, val);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                            pairList.push_back(std::pair&lt;uint64_t, T&gt;(key, val));</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                        }</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                    }</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                    map.insert(pairList.begin(), pairList.end());</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                }</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            }</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a34ac9d5bfd351da9b7696b5652eb95d5">ExitFlagTest</a>();</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            this-&gt;<a class="code" href="classutilities_1_1MultiHashBase.html#a2b68781bf0db191bd4e9a0fc2c9e51cb">MpiSynchronizeBase</a>(map, 0, <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>);</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;        }</div>
<div class="ttc" id="namespaceio_html_a21deb8bdc22417a8eb07113769d6c601af3e653b8bd8f794975fa5bda0a927bfc"><div class="ttname"><a href="namespaceio.html#a21deb8bdc22417a8eb07113769d6c601af3e653b8bd8f794975fa5bda0a927bfc">io::_BINARY_</a></div><div class="ttdef"><b>Definition:</b> <a href="io__wrapper_8hpp_source.html#l00023">io_wrapper.hpp:23</a></div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_a34ac9d5bfd351da9b7696b5652eb95d5"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#a34ac9d5bfd351da9b7696b5652eb95d5">utilities::MpiWrapper::ExitFlagTest</a></div><div class="ttdeci">void ExitFlagTest()</div><div class="ttdoc">If the exitflag is set to true on the master node, then call Terminate. </div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8cpp_source.html#l00327">mpi_wrapper.cpp:327</a></div></div>
<div class="ttc" id="namespaceio_html_a21deb8bdc22417a8eb07113769d6c601ac78d869c7c1c4a0f9c801afc7cca4ce8"><div class="ttname"><a href="namespaceio.html#a21deb8bdc22417a8eb07113769d6c601ac78d869c7c1c4a0f9c801afc7cca4ce8">io::_TEXT_</a></div><div class="ttdef"><b>Definition:</b> <a href="io__wrapper_8hpp_source.html#l00023">io_wrapper.hpp:23</a></div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_a7ffe7ed2049a6b7feb5778886a0d522e"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#a7ffe7ed2049a6b7feb5778886a0d522e">utilities::MpiWrapper::m_exitFlag</a></div><div class="ttdeci">bool m_exitFlag</div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8hpp_source.html#l00067">mpi_wrapper.hpp:67</a></div></div>
<div class="ttc" id="namespaceutilities_html_ab78b0dbfe83aa9c7055214013b2d2b40"><div class="ttname"><a href="namespaceutilities.html#ab78b0dbfe83aa9c7055214013b2d2b40">utilities::Pack4x16</a></div><div class="ttdeci">uint64_t Pack4x16(const uint16_t key1, const uint16_t key2, const uint16_t key3, const uint16_t key4)</div><div class="ttdef"><b>Definition:</b> <a href="serialize_8hpp_source.html#l00121">serialize.hpp:121</a></div></div>
<div class="ttc" id="namespaceutilities_html_a2a6afaf89e9c2b614a690c5bae5ea984"><div class="ttname"><a href="namespaceutilities.html#a2a6afaf89e9c2b614a690c5bae5ea984">utilities::FromStream</a></div><div class="ttdeci">void FromStream(std::ifstream &amp;stream, double &amp;value)</div><div class="ttdef"><b>Definition:</b> <a href="io__wrapper_8hpp_source.html#l00097">io_wrapper.hpp:97</a></div></div>
<div class="ttc" id="optical__flux__lattice__noninteracting__model_8cpp_html_a1a7112d51c59f426cab52975031ff6e7"><div class="ttname"><a href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a></div><div class="ttdeci">utilities::MpiWrapper mpi(utilities::cout)</div></div>
<div class="ttc" id="namespaceutilities_html_abf0d157baa23b47b75d49bf4bb08ff3f"><div class="ttname"><a href="namespaceutilities.html#abf0d157baa23b47b75d49bf4bb08ff3f">utilities::Pack8x8</a></div><div class="ttdeci">uint64_t Pack8x8(const uint8_t key1, const uint8_t key2, const uint8_t key3, const uint8_t key4, const uint8_t key5, const uint8_t key6, const uint8_t key7, const uint8_t key8)</div><div class="ttdef"><b>Definition:</b> <a href="serialize_8hpp_source.html#l00155">serialize.hpp:155</a></div></div>
<div class="ttc" id="classutilities_1_1MultiHashBase_html_a2b68781bf0db191bd4e9a0fc2c9e51cb"><div class="ttname"><a href="classutilities_1_1MultiHashBase.html#a2b68781bf0db191bd4e9a0fc2c9e51cb">utilities::MultiHashBase::MpiSynchronizeBase</a></div><div class="ttdeci">void MpiSynchronizeBase(M &amp;map, const int nodeId, const MpiWrapper &amp;mpi)</div><div class="ttdoc">Mpi synchronize the contents of the map. This template function takes any map type as an argument...</div><div class="ttdef"><b>Definition:</b> <a href="multi__key__hash_8hpp_source.html#l00181">multi_key_hash.hpp:181</a></div></div>
<div class="ttc" id="namespaceutilities_html_aa88f2e607b1e3541233edf2bd7ee44ab"><div class="ttname"><a href="namespaceutilities.html#aa88f2e607b1e3541233edf2bd7ee44ab">utilities::Pack2x32</a></div><div class="ttdeci">uint64_t Pack2x32(const uint32_t key1, const uint32_t key2)</div><div class="ttdef"><b>Definition:</b> <a href="serialize_8hpp_source.html#l00096">serialize.hpp:96</a></div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_a0f670cb88d82d9c815e111de5e76ae3e"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">utilities::MpiWrapper::m_id</a></div><div class="ttdeci">int m_id</div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8hpp_source.html#l00056">mpi_wrapper.hpp:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0959d1e75fcd544c43b3df25af8e7d27"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<div class="memtemplate">
template&lt;class M &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classutilities_1_1MultiHashBase.html">utilities::MultiHashBase</a>&lt; T &gt;::MpiGatherBase </td>
          <td>(</td>
          <td class="paramtype">M &amp;&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nodeId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structutilities_1_1MpiWrapper.html">MpiWrapper</a> &amp;&#160;</td>
          <td class="paramname"><em>mpi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mpi gather the contents of the map onto the master node. This template function takes any map type as an argument, but every map type has available all the methods called for this operation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>Map to be gathered </td></tr>
    <tr><td class="paramname">nodeId</td><td>Node to gather on </td></tr>
    <tr><td class="paramname">mpi</td><td>Instance of the MPI wrapper class </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="multi__key__hash_8hpp_source.html#l00245">245</a> of file <a class="el" href="multi__key__hash_8hpp_source.html">multi_key_hash.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;        {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="comment">//  First count the number of values that are in the map on each node</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            <span class="keywordtype">int</span> size;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keywordtype">int</span> totalSize;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;            size = map.size();</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;            MPI_Reduce(&amp;size, &amp;totalSize, 1, <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#af18344940a2fccb1c210a8f9f33a1b6e">GetType</a>&lt;<span class="keywordtype">int</span>&gt;(), MPI_SUM, nodeId, <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a7e00700c79360216f60abafad2b0ab1f">m_comm</a>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;            <span class="comment">//  Convert all other node maps to a list of buffers for the keys and values</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            uint64_t* keyBuffer = <span class="keyword">new</span> uint64_t[size];</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            T* valueBuffer      = <span class="keyword">new</span> T[size];</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;            uint64_t* p_keyBuffer = keyBuffer;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            T* p_valueBuffer      = valueBuffer;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <span class="keywordflow">for</span>(<span class="keyword">auto</span> it = map.begin(); it != map.end(); ++it, ++p_keyBuffer, ++p_valueBuffer)</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            {</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                *(p_keyBuffer)   = it-&gt;first;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                *(p_valueBuffer) = it-&gt;second;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            }</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <span class="comment">//  Clear the maps on all nodes to free up available space</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="keywordflow">if</span>(!map.empty())</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            {</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                map.clear();</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            <span class="comment">//  Allocate memory to store the accumulated buffers on the master node</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            uint64_t* keyRecvBuffer = 0;</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            T* mapRecvBuffer = 0;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            <span class="keywordflow">if</span>(nodeId == <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">m_id</a>)    <span class="comment">//  For the gather node</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                keyRecvBuffer = <span class="keyword">new</span> uint64_t[totalSize];</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                mapRecvBuffer = <span class="keyword">new</span> T[totalSize];</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;            <span class="comment">//  Use an MPI gather routine to move around the buffered data</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            MPI_Status status;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a891ad0d4731f9a66311170d22f32b9e4">Gather</a>&lt;uint64_t&gt;(keyBuffer, size, keyRecvBuffer, totalSize, nodeId, <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a7e00700c79360216f60abafad2b0ab1f">m_comm</a>, status);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a891ad0d4731f9a66311170d22f32b9e4">Gather</a>&lt;T&gt;(valueBuffer, size, mapRecvBuffer, totalSize, nodeId, <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a7e00700c79360216f60abafad2b0ab1f">m_comm</a>, status);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keyword">delete</span>[] keyBuffer;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keyword">delete</span>[] valueBuffer;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="comment">//  Insert the received buffer data into a map on the master node</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="keywordflow">if</span>(nodeId == <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">m_id</a>)    <span class="comment">//  For the gather node</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                <span class="comment">//  First convert the buffered map and value arrays into </span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                <span class="comment">//  a pair list</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                std::vector&lt;std::pair&lt;uint64_t, T&gt; &gt; pairList;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                pairList.reserve(totalSize);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                uint64_t* p_keyBuffer = keyRecvBuffer;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                T* p_valueBuffer = mapRecvBuffer;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                <span class="keywordflow">for</span>(uint64_t i=0; i&lt;totalSize; ++i, ++p_keyBuffer, ++p_valueBuffer)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                    pairList.push_back(std::pair&lt;uint64_t, T&gt;(*(p_keyBuffer), *(p_valueBuffer)));</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                <span class="comment">//  Remove duplicates</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                QuickSort&lt;std::pair&lt;uint64_t, T&gt;, int, <a class="code" href="quick__sort_8hpp.html#a6c7dd10fb53eaa1cb9705e4ee36f5fcbaea9537dccc6fe0a37f95cb07414cd090">_ASCENDING_ORDER_</a>&gt;(pairList);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                std::vector&lt;std::pair&lt;uint64_t, T&gt; &gt; uniquePairList;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                uniquePairList.reserve(totalSize);</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                std::pair&lt;uint64_t, T&gt; prev_value = pairList[0];</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                <span class="keywordflow">for</span>(<span class="keyword">typename</span> std::vector&lt;std::pair&lt;uint64_t, T&gt; &gt;::const_iterator it = pairList.begin(); </div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                    it &lt; pairList.end(); ++it)</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                    uniquePairList.push_back(*it);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                    <span class="keywordflow">while</span>(*it == prev_value)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                    {</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                        ++it;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                    }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                    prev_value = *it;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                <span class="comment">//  Insert the whole range into the map in one operation</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                map.insert(uniquePairList.begin(), uniquePairList.end());</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                <span class="keyword">delete</span>[] keyRecvBuffer;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                <span class="keyword">delete</span>[] mapRecvBuffer;  </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        }</div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_a891ad0d4731f9a66311170d22f32b9e4"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#a891ad0d4731f9a66311170d22f32b9e4">utilities::MpiWrapper::Gather</a></div><div class="ttdeci">void Gather(T *sendBuffer, int sendCount, T *recvBuffer, int recvCount, int gatherId, MPI_Comm comm, MPI_Status status) const </div><div class="ttdoc">A function to implement MPI Gather, but with different sizes of buffer on each node (the standard MPI...</div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8hpp_source.html#l00147">mpi_wrapper.hpp:147</a></div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_a7e00700c79360216f60abafad2b0ab1f"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#a7e00700c79360216f60abafad2b0ab1f">utilities::MpiWrapper::m_comm</a></div><div class="ttdeci">MPI_Comm m_comm</div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8hpp_source.html#l00069">mpi_wrapper.hpp:69</a></div></div>
<div class="ttc" id="optical__flux__lattice__noninteracting__model_8cpp_html_a1a7112d51c59f426cab52975031ff6e7"><div class="ttname"><a href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a></div><div class="ttdeci">utilities::MpiWrapper mpi(utilities::cout)</div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_af18344940a2fccb1c210a8f9f33a1b6e"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#af18344940a2fccb1c210a8f9f33a1b6e">utilities::MpiWrapper::GetType</a></div><div class="ttdeci">MPI_Datatype GetType() const </div><div class="ttdoc">A template function to convert a given c variable type into an appropriate MPI type. </div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8hpp_source.html#l00314">mpi_wrapper.hpp:314</a></div></div>
<div class="ttc" id="quick__sort_8hpp_html_a6c7dd10fb53eaa1cb9705e4ee36f5fcbaea9537dccc6fe0a37f95cb07414cd090"><div class="ttname"><a href="quick__sort_8hpp.html#a6c7dd10fb53eaa1cb9705e4ee36f5fcbaea9537dccc6fe0a37f95cb07414cd090">_ASCENDING_ORDER_</a></div><div class="ttdef"><b>Definition:</b> <a href="quick__sort_8hpp_source.html#l00038">quick_sort.hpp:38</a></div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_a0f670cb88d82d9c815e111de5e76ae3e"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">utilities::MpiWrapper::m_id</a></div><div class="ttdeci">int m_id</div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8hpp_source.html#l00056">mpi_wrapper.hpp:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aebbf5753a0c716133002286c28cfb5ca"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<div class="memtemplate">
template&lt;class M &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classutilities_1_1MultiHashBase.html">utilities::MultiHashBase</a>&lt; T &gt;::MpiScatterBase </td>
          <td>(</td>
          <td class="paramtype">M &amp;&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint64_t&#160;</td>
          <td class="paramname"><em>maxKey</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nodeId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structutilities_1_1MpiWrapper.html">MpiWrapper</a> &amp;&#160;</td>
          <td class="paramname"><em>mpi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mpi scatter the contents of the map from the master node to distribute over a number of nodes according to the range of the map key. </p>
<p>This template function takes any map type as an argument, but every map type has available all the methods called for this operation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>Map to be gathered </td></tr>
    <tr><td class="paramname">maxKey</td><td>Maximum map key stored on the current node </td></tr>
    <tr><td class="paramname">nodeId</td><td>Node to scatter from </td></tr>
    <tr><td class="paramname">mpi</td><td>Instance of the MPI wrapper class </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="multi__key__hash_8hpp_source.html#l00329">329</a> of file <a class="el" href="multi__key__hash_8hpp_source.html">multi_key_hash.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <span class="comment">//  Communicate all of the maxKey values to every node</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            uint64_t maxKeyList[<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0615e4621e3e3fe7c42f6e5bc0f00d6a">m_nbrProcs</a>];</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            maxKeyList[<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">m_id</a>] = maxKey;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p=0; p&lt;<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0615e4621e3e3fe7c42f6e5bc0f00d6a">m_nbrProcs</a>; ++p)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#ab7c5634cdbed7e4436b54b9ef619f85b">Sync</a>(&amp;maxKeyList[p], 1, p);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            }</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="comment">//  Check that the maxKeyList is in ascending order</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p=1; p&lt;<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0615e4621e3e3fe7c42f6e5bc0f00d6a">m_nbrProcs</a>; ++p)</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                <span class="keywordflow">if</span>(maxKeyList[p]&lt;maxKeyList[p-1])</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                {</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                    <span class="keywordflow">if</span>(nodeId == <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">m_id</a>)    <span class="comment">//  For the scatter node</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                    {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                        std::cerr&lt;&lt;<span class="stringliteral">&quot;\n\tERROR in MpiScatter: maxKey declaration not in asceding order!&quot;</span>&lt;&lt;std::endl;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                    exit(EXIT_FAILURE);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            <span class="comment">//  Prepare a list of the sizes of the hash map on each node</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sizeList[<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0615e4621e3e3fe7c42f6e5bc0f00d6a">m_nbrProcs</a>];</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p=0; p&lt;<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0615e4621e3e3fe7c42f6e5bc0f00d6a">m_nbrProcs</a>; ++p)</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            {</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                sizeList[p] = 0;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            uint64_t* keyBuffer = 0;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            T* valueBuffer = 0;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> totalSize;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="keywordflow">if</span>(nodeId == <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">m_id</a>)    <span class="comment">//  For the scatter node</span></div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            {</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                <span class="comment">//  First count the number of values that are in the map                </span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                totalSize = map.size();</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                <span class="comment">//  Convert all other node maps to a list of buffers for the keys and values</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                keyBuffer   = <span class="keyword">new</span> uint64_t[totalSize];</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                valueBuffer = <span class="keyword">new</span> T[totalSize];</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                uint64_t* p_keyBuffer   = keyBuffer;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                T* p_valueBuffer = valueBuffer;</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                <span class="keywordflow">for</span>(<span class="keyword">auto</span> it = map.begin(); it != map.end(); ++it, ++p_keyBuffer, ++p_valueBuffer)</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                    *p_keyBuffer   = it-&gt;first;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                    *p_valueBuffer = it-&gt;second;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                }</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                <span class="comment">//  Clear the map to free up available space</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                <span class="keywordflow">if</span>(!map.empty())</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                    map.clear();</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="preprocessor">                    #if _SPEED_OPTIMIZED_MAP_ || _MEMORY_OPTIMIZED_MAP_</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="preprocessor"></span>                    map.resize(0);</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="preprocessor">                    #endif</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="preprocessor"></span>                }</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                <span class="comment">//  Count how many map key values are going to be stored on each</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                <span class="comment">//  node once the map is distributed</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                p_keyBuffer = keyBuffer;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;totalSize; ++i, ++p_keyBuffer)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p=0; p&lt;<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0615e4621e3e3fe7c42f6e5bc0f00d6a">m_nbrProcs</a>; ++p)</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                    {</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                        <span class="keywordflow">if</span>(*p_keyBuffer &lt; maxKeyList[p])</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                        {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                            ++sizeList[p];</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                        }</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                    }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cumulativeSizeList[<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0615e4621e3e3fe7c42f6e5bc0f00d6a">m_nbrProcs</a>];</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p=0; p&lt;<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0615e4621e3e3fe7c42f6e5bc0f00d6a">m_nbrProcs</a>; ++p)</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                    cumulativeSizeList[p] = 0;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> q=0; q&lt;p; ++q)</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                    {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                        cumulativeSizeList[p] += sizeList[q];</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                    }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                <span class="comment">//  Check that the total of the size list equals the size of</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                <span class="comment">//  the hash map</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                <span class="keywordflow">if</span>(cumulativeSizeList[<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0615e4621e3e3fe7c42f6e5bc0f00d6a">m_nbrProcs</a>-1]+sizeList[<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0615e4621e3e3fe7c42f6e5bc0f00d6a">m_nbrProcs</a>-1] != totalSize)</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                    std::cerr&lt;&lt;<span class="stringliteral">&quot;\n\tERROR in MultiHashMap::MpiScatter: list of maximum keys leads to inconsistent data distribution.&quot;</span>&lt;&lt;std::endl;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                    <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a7ffe7ed2049a6b7feb5778886a0d522e">m_exitFlag</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                }</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                <span class="comment">//  Reorder the buffers so that the data is in the correct order</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                <span class="comment">//  to be contiguously distributed to the other nodes</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                uint64_t* reorderKeyBuffer = <span class="keyword">new</span> uint64_t[totalSize];</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                T* reorderValueBuffer = <span class="keyword">new</span> T[totalSize];</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                p_keyBuffer = keyBuffer;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                p_valueBuffer = valueBuffer;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p=0; p&lt;<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0615e4621e3e3fe7c42f6e5bc0f00d6a">m_nbrProcs</a>; ++p)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                    sizeList[p] = 0;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                }</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0; i&lt;totalSize; ++i, ++p_keyBuffer, ++p_valueBuffer)</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> p=0; p&lt;<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0615e4621e3e3fe7c42f6e5bc0f00d6a">m_nbrProcs</a>; ++p)</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                    {</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                        <span class="keywordflow">if</span>(*p_keyBuffer &lt; maxKeyList[p])</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                        {</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                            reorderKeyBuffer[cumulativeSizeList[p]+sizeList[p]] = *p_keyBuffer;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                            reorderValueBuffer[cumulativeSizeList[p]+sizeList[p]] = *p_valueBuffer;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                            ++sizeList[p];</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                        }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                memcpy(keyBuffer, reorderKeyBuffer, totalSize*<span class="keyword">sizeof</span>(uint64_t));</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                memcpy(valueBuffer, reorderValueBuffer, totalSize*<span class="keyword">sizeof</span>(T));</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                <span class="keyword">delete</span>[] reorderKeyBuffer;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                <span class="keyword">delete</span>[] reorderValueBuffer;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            }</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;            <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a34ac9d5bfd351da9b7696b5652eb95d5">ExitFlagTest</a>();</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <span class="comment">//  Next, inform each of the other nodes about the number of values</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="comment">//  they should receive</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#ab7c5634cdbed7e4436b54b9ef619f85b">Sync</a>(sizeList,<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0615e4621e3e3fe7c42f6e5bc0f00d6a">m_nbrProcs</a>, nodeId);</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#ab7c5634cdbed7e4436b54b9ef619f85b">Sync</a>(&amp;totalSize, 1, 0);</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            uint64_t* keyRecvBuffer = 0;</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            T* valueRecvBuffer = 0;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            keyRecvBuffer = <span class="keyword">new</span> uint64_t[sizeList[<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">m_id</a>]];</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            valueRecvBuffer = <span class="keyword">new</span> T[sizeList[<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">m_id</a>]];</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="comment">//  Scatter the key and values buffers over all nodes</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;            MPI_Status status;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#af9673581213e6b9e43fc847f02fc5698">Scatter</a>(keyBuffer, totalSize, keyRecvBuffer, sizeList[<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">m_id</a>], nodeId, <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a7e00700c79360216f60abafad2b0ab1f">m_comm</a>, status);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#af9673581213e6b9e43fc847f02fc5698">Scatter</a>(valueBuffer, totalSize, valueRecvBuffer, sizeList[<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">m_id</a>], nodeId, <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a7e00700c79360216f60abafad2b0ab1f">m_comm</a>, status);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="keywordflow">if</span>(0 != keyBuffer)   <span class="keyword">delete</span>[] keyBuffer;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="keywordflow">if</span>(0 != valueBuffer) <span class="keyword">delete</span>[] valueBuffer;</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="comment">//  Finally, insert the key and map back into a hash table object</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            <span class="comment">//  and then delete the buffers</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            std::vector&lt;std::pair&lt;uint64_t, T&gt; &gt; pairList;</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            pairList.reserve(sizeList[<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">m_id</a>]);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;            uint64_t* p_keyBuffer = keyRecvBuffer;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            T* p_valueBuffer = valueRecvBuffer;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            <span class="keywordflow">for</span>(uint64_t i=0; i&lt;sizeList[<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">m_id</a>]; ++i, ++p_keyBuffer, ++p_valueBuffer)</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;            {</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                pairList.push_back(std::pair&lt;uint64_t, T&gt;(*(p_keyBuffer), *(p_valueBuffer)));</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="comment">//  Insert the whole range into the map in one operation</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            map.insert(pairList.begin(), pairList.end());</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="comment">//  Finally remove memory allocated to store the receive buffers</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            <span class="keyword">delete</span>[] keyRecvBuffer;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            <span class="keyword">delete</span>[] valueRecvBuffer;</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        }</div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_a34ac9d5bfd351da9b7696b5652eb95d5"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#a34ac9d5bfd351da9b7696b5652eb95d5">utilities::MpiWrapper::ExitFlagTest</a></div><div class="ttdeci">void ExitFlagTest()</div><div class="ttdoc">If the exitflag is set to true on the master node, then call Terminate. </div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8cpp_source.html#l00327">mpi_wrapper.cpp:327</a></div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_a7ffe7ed2049a6b7feb5778886a0d522e"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#a7ffe7ed2049a6b7feb5778886a0d522e">utilities::MpiWrapper::m_exitFlag</a></div><div class="ttdeci">bool m_exitFlag</div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8hpp_source.html#l00067">mpi_wrapper.hpp:67</a></div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_a7e00700c79360216f60abafad2b0ab1f"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#a7e00700c79360216f60abafad2b0ab1f">utilities::MpiWrapper::m_comm</a></div><div class="ttdeci">MPI_Comm m_comm</div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8hpp_source.html#l00069">mpi_wrapper.hpp:69</a></div></div>
<div class="ttc" id="optical__flux__lattice__noninteracting__model_8cpp_html_a1a7112d51c59f426cab52975031ff6e7"><div class="ttname"><a href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a></div><div class="ttdeci">utilities::MpiWrapper mpi(utilities::cout)</div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_af9673581213e6b9e43fc847f02fc5698"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#af9673581213e6b9e43fc847f02fc5698">utilities::MpiWrapper::Scatter</a></div><div class="ttdeci">void Scatter(T *sendBuffer, int sendCount, T *recvBuffer, int recvCount, int scatterId, MPI_Comm comm, MPI_Status status) const </div><div class="ttdoc">A function to implement MPI Scatter, but with different sizes of buffer on each node (the standard MP...</div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8hpp_source.html#l00201">mpi_wrapper.hpp:201</a></div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_a0f670cb88d82d9c815e111de5e76ae3e"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">utilities::MpiWrapper::m_id</a></div><div class="ttdeci">int m_id</div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8hpp_source.html#l00056">mpi_wrapper.hpp:56</a></div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_a0615e4621e3e3fe7c42f6e5bc0f00d6a"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#a0615e4621e3e3fe7c42f6e5bc0f00d6a">utilities::MpiWrapper::m_nbrProcs</a></div><div class="ttdeci">int m_nbrProcs</div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8hpp_source.html#l00054">mpi_wrapper.hpp:54</a></div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_ab7c5634cdbed7e4436b54b9ef619f85b"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#ab7c5634cdbed7e4436b54b9ef619f85b">utilities::MpiWrapper::Sync</a></div><div class="ttdeci">void Sync(std::string &amp;buffer, int syncNode) const </div><div class="ttdoc">A function to MPI synchronize a string. </div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8cpp_source.html#l00345">mpi_wrapper.cpp:345</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2b68781bf0db191bd4e9a0fc2c9e51cb"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<div class="memtemplate">
template&lt;class M &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classutilities_1_1MultiHashBase.html">utilities::MultiHashBase</a>&lt; T &gt;::MpiSynchronizeBase </td>
          <td>(</td>
          <td class="paramtype">M &amp;&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>nodeId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="structutilities_1_1MpiWrapper.html">MpiWrapper</a> &amp;&#160;</td>
          <td class="paramname"><em>mpi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mpi synchronize the contents of the map. This template function takes any map type as an argument, but every map type has available all the methods called for this operation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>Map to be synchronized </td></tr>
    <tr><td class="paramname">nodeId</td><td>Node to synchronize with </td></tr>
    <tr><td class="paramname">mpi</td><td>Instance of the MPI wrapper class </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="multi__key__hash_8hpp_source.html#l00181">181</a> of file <a class="el" href="multi__key__hash_8hpp_source.html">multi_key_hash.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        {</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="comment">//  This implementation is very inefficient: we simply read out the </span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="comment">//  contents of the map into a pair of key and map arrays, send</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="comment">//  these arrays over the network, then reconstruct the hash tables</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            <span class="comment">//  on the other nodes</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="comment">//  First broadcast the number of elements in the map</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            uint64_t size;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;            <span class="keywordflow">if</span>(nodeId == <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">m_id</a>)    <span class="comment">//  FOR THE MASTER NODE</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            {</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                size = map.size();</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;            }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            MPI_Bcast(&amp;size, 1, <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#af18344940a2fccb1c210a8f9f33a1b6e">GetType</a>&lt;uint64_t&gt;(), nodeId, <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a7e00700c79360216f60abafad2b0ab1f">m_comm</a>);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            <span class="comment">//  Allocate buffers to store the map on each node</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            uint64_t* keyBuffer   = <span class="keyword">new</span> uint64_t[size];</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            T* valueBuffer = <span class="keyword">new</span> T[size];</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="keywordflow">if</span>(nodeId == <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">m_id</a>)    <span class="comment">//  FOR THE MASTER NODE</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                <span class="comment">//  Populate the buffers on the master node</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                uint64_t* p_keyBuffer = keyBuffer;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                T* p_valueBuffer = valueBuffer;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                <span class="keywordflow">for</span>(<span class="keyword">auto</span> it = map.begin(); it != map.end(); ++it, ++p_keyBuffer, ++p_valueBuffer)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                    *(p_keyBuffer) = it-&gt;first;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    *(p_valueBuffer) = it-&gt;second;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;            }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            MPI_Bcast(keyBuffer, size, <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#af18344940a2fccb1c210a8f9f33a1b6e">GetType</a>&lt;uint64_t&gt;(), nodeId, <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a7e00700c79360216f60abafad2b0ab1f">m_comm</a>); </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            MPI_Bcast(valueBuffer, size,<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#af18344940a2fccb1c210a8f9f33a1b6e">GetType</a>&lt;T&gt;(), nodeId, <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a7e00700c79360216f60abafad2b0ab1f">m_comm</a>);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="comment">//  Set the maps on all other nodes from the buffered values</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="comment">//  (the map values on other nodes are cleared first)</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;            <span class="keywordflow">if</span>(nodeId != <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">m_id</a>)    <span class="comment">//  FOR ALL OTHER NDOES</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                <span class="keywordflow">if</span>(!map.empty())</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                    map.clear();</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                uint64_t* p_keyBuffer = keyBuffer;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                T* p_valueBuffer = valueBuffer;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                <span class="comment">//  Generate a pair buffer so that all map values can </span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                <span class="comment">//  be inserted in one operation</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                std::vector&lt;std::pair&lt;uint64_t, T&gt; &gt; pairList;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                pairList.reserve(size);</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                <span class="keywordflow">for</span>(uint64_t i=0; i&lt;size; ++i, ++p_keyBuffer, ++p_valueBuffer)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                {</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                    pairList.push_back(std::pair&lt;uint64_t, T&gt;(*(p_keyBuffer), *(p_valueBuffer)));</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                <span class="comment">//  Insert the whole range into the map in one operation</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                map.insert(pairList.begin(), pairList.end());</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <span class="keyword">delete</span>[] keyBuffer;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;            <span class="keyword">delete</span>[] valueBuffer;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        }</div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_a7e00700c79360216f60abafad2b0ab1f"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#a7e00700c79360216f60abafad2b0ab1f">utilities::MpiWrapper::m_comm</a></div><div class="ttdeci">MPI_Comm m_comm</div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8hpp_source.html#l00069">mpi_wrapper.hpp:69</a></div></div>
<div class="ttc" id="optical__flux__lattice__noninteracting__model_8cpp_html_a1a7112d51c59f426cab52975031ff6e7"><div class="ttname"><a href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a></div><div class="ttdeci">utilities::MpiWrapper mpi(utilities::cout)</div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_af18344940a2fccb1c210a8f9f33a1b6e"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#af18344940a2fccb1c210a8f9f33a1b6e">utilities::MpiWrapper::GetType</a></div><div class="ttdeci">MPI_Datatype GetType() const </div><div class="ttdoc">A template function to convert a given c variable type into an appropriate MPI type. </div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8hpp_source.html#l00314">mpi_wrapper.hpp:314</a></div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_a0f670cb88d82d9c815e111de5e76ae3e"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">utilities::MpiWrapper::m_id</a></div><div class="ttdeci">int m_id</div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8hpp_source.html#l00056">mpi_wrapper.hpp:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a636d41d0dec084650bd84a50363260f2"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T&gt; </div>
<div class="memtemplate">
template&lt;class M &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classutilities_1_1MultiHashBase.html">utilities::MultiHashBase</a>&lt; T &gt;::ToFileBase </td>
          <td>(</td>
          <td class="paramtype">const M &amp;&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ofstream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespaceio.html#a21deb8bdc22417a8eb07113769d6c601">io::fileFormat_t</a>&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned int&#160;</td>
          <td class="paramname"><em>nbrLabels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structutilities_1_1MpiWrapper.html">MpiWrapper</a> &amp;&#160;</td>
          <td class="paramname"><em>mpi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Write the contents of the map to a file using the set number of key labels </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>Map containing data to write to the file </td></tr>
    <tr><td class="paramname">stream</td><td>File stream </td></tr>
    <tr><td class="paramname">format</td><td>Format of file </td></tr>
    <tr><td class="paramname">nbrLabels</td><td>Number of key labels </td></tr>
    <tr><td class="paramname">mpi</td><td>Instance of the MPI wrapper class </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="multi__key__hash_8hpp_source.html#l00481">481</a> of file <a class="el" href="multi__key__hash_8hpp_source.html">multi_key_hash.hpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        {</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;            <span class="comment">//  Create a copy of the map for the MPI gather operation to modify</span></div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;            M temp_map = map;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;            this-&gt;<a class="code" href="classutilities_1_1MultiHashBase.html#a0959d1e75fcd544c43b3df25af8e7d27">MpiGatherBase</a>(temp_map, 0, <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            <span class="keywordflow">if</span>(0 == <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">m_id</a>)    <span class="comment">//  FOR THE MASTER NODE</span></div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;            {</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                <span class="keywordflow">if</span>(!<a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a7ffe7ed2049a6b7feb5778886a0d522e">m_exitFlag</a>)</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                {</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                    <span class="keywordflow">if</span>(<a class="code" href="namespaceio.html#a21deb8bdc22417a8eb07113769d6c601af3e653b8bd8f794975fa5bda0a927bfc">io::_BINARY_</a> == format)</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                    {   </div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size = temp_map.size();</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                        std::vector&lt;uint64_t&gt; keys(size);</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                        std::vector&lt;T&gt; values(size);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                        std::vector&lt;uint64_t&gt;::iterator keys_it = keys.begin();</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                        <span class="keyword">typename</span> std::vector&lt;T&gt;::iterator values_it = values.begin();</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                        <span class="keywordflow">for</span>(<span class="keyword">auto</span> it = temp_map.begin(); it != temp_map.end(); ++it, ++keys_it, ++values_it)</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                        {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                            *keys_it = it-&gt;first;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                            *values_it = it-&gt;second;</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                        }</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                        stream.write((<span class="keywordtype">char</span>*)&amp;size, <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>));</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                        stream.write((<span class="keywordtype">char</span>*)keys.data(), size*<span class="keyword">sizeof</span>(uint64_t));</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                        stream.write((<span class="keywordtype">char</span>*)values.data(), size*<span class="keyword">sizeof</span>(T));</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                    }</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="namespaceio.html#a21deb8bdc22417a8eb07113769d6c601ac78d869c7c1c4a0f9c801afc7cca4ce8">io::_TEXT_</a> == format)</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                    {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                        stream &lt;&lt; temp_map.size() &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                        stream &lt;&lt; nbrLabels &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                        <span class="comment">//  Write map key-value pairs to the file (including multiple  </span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                        <span class="comment">//  values if found)</span></div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                        <span class="keywordflow">for</span>(<span class="keyword">auto</span> it = temp_map.begin(); it != temp_map.end(); ++it)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                        {</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                            std::string streamData = <a class="code" href="namespaceutilities.html#a5aa7f7439072020c4a0dbd6f0fbe85b8">utilities::ToStream</a>(it-&gt;second);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                            <span class="keywordflow">switch</span>(nbrLabels)</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                            {</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                                <span class="keywordflow">case</span> 1:</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                                {</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                                    stream &lt;&lt; it-&gt;first &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; streamData &lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                                }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                                <span class="keywordflow">case</span> 2:</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                                {    </div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                                    uint32_t key1, key2;</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                                    <a class="code" href="namespaceutilities.html#a307f22a0ca92ed7ec48931314b9cf8dd">utilities::Unpack2x32</a>(it-&gt;first, key1, key2);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                                    stream &lt;&lt; key1 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; key2 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; streamData &lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                                }</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                                <span class="keywordflow">case</span> 3:</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                                {    </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                                    uint16_t key1, key2, key3, key4;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                                    <a class="code" href="namespaceutilities.html#a095a3b7adb942010942db6922145aebf">utilities::Unpack4x16</a>(it-&gt;first, key1, key2, key3, key4);</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                                    stream &lt;&lt; key1 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; key2 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; key3 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; streamData &lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                                }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                                <span class="keywordflow">case</span> 4:</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                                {</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                                    uint16_t key1, key2, key3, key4;</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                                    <a class="code" href="namespaceutilities.html#a095a3b7adb942010942db6922145aebf">utilities::Unpack4x16</a>(it-&gt;first, key1, key2, key3, key4);           </div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                                    stream &lt;&lt; key1 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; key2 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; key3 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; key4 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span>;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                                    stream &lt;&lt; streamData &lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                                }</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                                <span class="keywordflow">case</span> 8:</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                                {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                                    uint8_t key1, key2, key3, key4, key5, key6, key7, key8;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                                    <a class="code" href="namespaceutilities.html#a48f08a26fc2b365a16c0a0e9fe09e716">utilities::Unpack8x8</a>(it-&gt;first, key1, key2, key3, key4, key5, key6, key7, key8);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                                    stream &lt;&lt; key1 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; key2 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; key3 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; key4 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; key5&lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; key6;</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                                    stream &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; key7 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; key8 &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; streamData &lt;&lt;<span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                                }</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                            }</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                        }</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                    }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                }</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            }</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            <a class="code" href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a>.<a class="code" href="structutilities_1_1MpiWrapper.html#a34ac9d5bfd351da9b7696b5652eb95d5">ExitFlagTest</a>();</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        }</div>
<div class="ttc" id="namespaceio_html_a21deb8bdc22417a8eb07113769d6c601af3e653b8bd8f794975fa5bda0a927bfc"><div class="ttname"><a href="namespaceio.html#a21deb8bdc22417a8eb07113769d6c601af3e653b8bd8f794975fa5bda0a927bfc">io::_BINARY_</a></div><div class="ttdef"><b>Definition:</b> <a href="io__wrapper_8hpp_source.html#l00023">io_wrapper.hpp:23</a></div></div>
<div class="ttc" id="namespaceutilities_html_a095a3b7adb942010942db6922145aebf"><div class="ttname"><a href="namespaceutilities.html#a095a3b7adb942010942db6922145aebf">utilities::Unpack4x16</a></div><div class="ttdeci">void Unpack4x16(const uint64_t index, uint16_t &amp;key1, uint16_t &amp;key2, uint16_t &amp;key3, uint16_t &amp;key4)</div><div class="ttdef"><b>Definition:</b> <a href="serialize_8hpp_source.html#l00136">serialize.hpp:136</a></div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_a34ac9d5bfd351da9b7696b5652eb95d5"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#a34ac9d5bfd351da9b7696b5652eb95d5">utilities::MpiWrapper::ExitFlagTest</a></div><div class="ttdeci">void ExitFlagTest()</div><div class="ttdoc">If the exitflag is set to true on the master node, then call Terminate. </div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8cpp_source.html#l00327">mpi_wrapper.cpp:327</a></div></div>
<div class="ttc" id="namespaceio_html_a21deb8bdc22417a8eb07113769d6c601ac78d869c7c1c4a0f9c801afc7cca4ce8"><div class="ttname"><a href="namespaceio.html#a21deb8bdc22417a8eb07113769d6c601ac78d869c7c1c4a0f9c801afc7cca4ce8">io::_TEXT_</a></div><div class="ttdef"><b>Definition:</b> <a href="io__wrapper_8hpp_source.html#l00023">io_wrapper.hpp:23</a></div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_a7ffe7ed2049a6b7feb5778886a0d522e"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#a7ffe7ed2049a6b7feb5778886a0d522e">utilities::MpiWrapper::m_exitFlag</a></div><div class="ttdeci">bool m_exitFlag</div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8hpp_source.html#l00067">mpi_wrapper.hpp:67</a></div></div>
<div class="ttc" id="optical__flux__lattice__noninteracting__model_8cpp_html_a1a7112d51c59f426cab52975031ff6e7"><div class="ttname"><a href="optical__flux__lattice__noninteracting__model_8cpp.html#a1a7112d51c59f426cab52975031ff6e7">mpi</a></div><div class="ttdeci">utilities::MpiWrapper mpi(utilities::cout)</div></div>
<div class="ttc" id="namespaceutilities_html_a48f08a26fc2b365a16c0a0e9fe09e716"><div class="ttname"><a href="namespaceutilities.html#a48f08a26fc2b365a16c0a0e9fe09e716">utilities::Unpack8x8</a></div><div class="ttdeci">void Unpack8x8(const uint64_t index, uint8_t &amp;key1, uint8_t &amp;key2, uint8_t &amp;key3, uint8_t &amp;key4, uint8_t &amp;key5, uint8_t &amp;key6, uint8_t &amp;key7, uint8_t &amp;key8)</div><div class="ttdef"><b>Definition:</b> <a href="serialize_8hpp_source.html#l00176">serialize.hpp:176</a></div></div>
<div class="ttc" id="namespaceutilities_html_a307f22a0ca92ed7ec48931314b9cf8dd"><div class="ttname"><a href="namespaceutilities.html#a307f22a0ca92ed7ec48931314b9cf8dd">utilities::Unpack2x32</a></div><div class="ttdeci">void Unpack2x32(const uint64_t index, uint32_t &amp;key1, uint32_t &amp;key2)</div><div class="ttdef"><b>Definition:</b> <a href="serialize_8hpp_source.html#l00107">serialize.hpp:107</a></div></div>
<div class="ttc" id="classutilities_1_1MultiHashBase_html_a0959d1e75fcd544c43b3df25af8e7d27"><div class="ttname"><a href="classutilities_1_1MultiHashBase.html#a0959d1e75fcd544c43b3df25af8e7d27">utilities::MultiHashBase::MpiGatherBase</a></div><div class="ttdeci">void MpiGatherBase(M &amp;map, const int nodeId, const MpiWrapper &amp;mpi)</div><div class="ttdoc">Mpi gather the contents of the map onto the master node. This template function takes any map type as...</div><div class="ttdef"><b>Definition:</b> <a href="multi__key__hash_8hpp_source.html#l00245">multi_key_hash.hpp:245</a></div></div>
<div class="ttc" id="namespaceutilities_html_a5aa7f7439072020c4a0dbd6f0fbe85b8"><div class="ttname"><a href="namespaceutilities.html#a5aa7f7439072020c4a0dbd6f0fbe85b8">utilities::ToStream</a></div><div class="ttdeci">std::string ToStream(T variable)</div><div class="ttdef"><b>Definition:</b> <a href="io__wrapper_8hpp_source.html#l00076">io_wrapper.hpp:76</a></div></div>
<div class="ttc" id="structutilities_1_1MpiWrapper_html_a0f670cb88d82d9c815e111de5e76ae3e"><div class="ttname"><a href="structutilities_1_1MpiWrapper.html#a0f670cb88d82d9c815e111de5e76ae3e">utilities::MpiWrapper::m_id</a></div><div class="ttdeci">int m_id</div><div class="ttdef"><b>Definition:</b> <a href="mpi__wrapper_8hpp_source.html#l00056">mpi_wrapper.hpp:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="multi__key__hash_8hpp_source.html">multi_key_hash.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespaceutilities.html">utilities</a></li><li class="navelem"><a class="el" href="classutilities_1_1MultiHashBase.html">MultiHashBase</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
